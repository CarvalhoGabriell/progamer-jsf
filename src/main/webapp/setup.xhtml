<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
	
<ui:composition template="_template.xhtml">
	<ui:define name="content">
	
	<p:messages id="messages"><p:autoUpdate/> </p:messages>
	<h:form>
	<p:card class ="form-card">
	    <f:facet name="title">
	    	New Setup
	    </f:facet>
	    
		<div class="p-field p-grid">
	   		 <h:outputLabel for="name" class="p-col-fixed" style="width:100px" value="Name"/>
		    <div class="p-col">
		        <p:inputText id="name" value="#{setupBean.setup.name}" required="true" requiredMessage="Campo Nome é Obrigatório"> 
		        	<f:ajax event="blur" render="messages" />
		        </p:inputText>
		    </div>
		</div>
		<div class="p-field p-grid">
	    	<label for="description" class="p-col-fixed" style="width:100px">Description</label>
		    <div class="p-col">
		        <p:inputTextarea id="description" value="#{setupBean.setup.description}" validatorMessage="Campo Descrição deve ter entre 10 e 255 caracteres">
		        	<f:validateLength minimum="10" maximum="255"/>
		        	<f:ajax event="blur" render="messages"/>
		        </p:inputTextarea>
		    </div>
		</div>
		
		<div class="p-field p-grid">
	    	<label for="price" class="p-col-fixed" style="width:100px">Price</label>
		    <div class="p-col">
		        <p:inputText id="price" value="#{setupBean.setup.price}" converterMessage="Campo Preço deve conter somente Números"> 
		        	<f:validateDoubleRange  minimum="100"/>
		        	<f:ajax event="blur" render="messages"/>
		        </p:inputText>
		    </div>
		</div>
	    
	    <f:facet name="footer">
	        <p:commandButton icon="pi pi-check" value="Save" action="#{setupBean.save}">
	        	<f:ajax execute="@form" render="messages"/>
	        </p:commandButton>
	        <p:commandButton icon="pi pi-times" value="Cancel" styleClass="ui-button-secondary" style="margin-left: .5em"/>
	    </f:facet>
</p:card>

	<p:dataTable  value = "#{setupBean.allSetups}" var= "setup" >

            <p:column  headerText = "Nome">
                <h:outputText  value = "#{setup.name}"/>
            </p:column >
            <p:column  headerText = "Description" >
                <h:outputText  value = "#{setup.description}"/>
            </p:column >
            <p:column  headerText = "Price" >
                <h:outputText  value = "#{setup.price}"/>
            </p:column >
        </p:dataTable >
	
</h:form>
	
	
	
	</ui:define>
</ui:composition>

</html>